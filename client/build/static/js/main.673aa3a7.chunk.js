(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{42:function(e,a,t){e.exports=t(74)},47:function(e,a,t){},71:function(e,a,t){},72:function(e,a,t){},73:function(e,a,t){},74:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(20),c=t.n(o),l=(t(47),t(13)),s=t(6),u=t(2),i=t.n(u),m=t(4),p=t(12),d=t(1),b=t(3),f=Object(r.createContext)(),E=Object(r.createContext)(),O=t(8),v=t.n(O),y=function(e){var a=Object(r.useContext)(f),t=a.alerta,o=a.mostrarAlerta,c=Object(r.useContext)(E),s=c.mensaje,u=c.autenticado,O=Object(r.useState)(!1),y=Object(b.a)(O,2),h=y[0],g=y[1],j=Object(r.useState)(""),R=Object(b.a)(j,2),A=R[0],w=R[1],x=Object(r.useState)(""),T=Object(b.a)(x,2),N=T[0],C=T[1],k=Object(r.useState)(!1),_=Object(b.a)(k,2),S=_[0],I=_[1];Object(r.useEffect)((function(){u&&e.history.push("/proyectos"),s&&o(s.msg,s.categoria)}),[s,u,e.history]);var P=Object(r.useState)({email:"",password:""}),L=Object(b.a)(P,2),U=L[0],F=L[1],D=U.email,G=U.password,Y=function(e){F(Object(d.a)(Object(d.a)({},U),{},Object(p.a)({},e.target.name,e.target.value)))},M=function(){g(!h),w("")},z=function(){var e=Object(m.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),""!==N){e.next=4;break}return w("Debe ingresar su correo!"),e.abrupt("return");case 4:return I(!0),e.next=7,v.a.get("/check_email/"+N).then(function(){var e=Object(m.a)(i.a.mark((function e(a){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==a.data){e.next=5;break}return I(!1),e.abrupt("return",w("Esta cuenta no existe!"));case 5:return I(!1),t={email:a.data.email,id:a.data._id},e.next=9,v.a.post("correo_recuperar_ps",t).then((function(){alert("Por favor revise su correo"),window.location.href="/"})).catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),B=function(){var e=Object(m.a)(i.a.mark((function e(a){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,v.a.post("/login_user",{email:D,password:G});case 4:t=e.sent,localStorage.setItem("JWT",t.data.token),window.location.href="/profile",e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),w(e.t0.response.data.message);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"form-usuario"},t?n.a.createElement("div",{className:"alerta ".concat(t.categoria)}," ",t.msg," "):null,n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("h1",null,"Iniciar Sesi\xf3n"),n.a.createElement("form",{onSubmit:B},n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Tu Email",value:D,onChange:Y})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Tu Password",value:G,onChange:Y})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Iniciar Sesi\xf3n"}))),n.a.createElement("p",{style:{textAlign:"center",color:"red",fontSize:"16px",marginTop:"15px"}},A),n.a.createElement("p",{onClick:M,style:{textAlign:"center",marginTop:"20px",cursor:"pointer",color:"blue"}},"Olvido su contrase\xf1a?",h?n.a.createElement("span",{onClick:M,className:"hide-forgot-password"}," ","ocultar"):null),h?n.a.createElement("form",{className:"forgotPasswordForm",onSubmit:z},n.a.createElement("input",{className:"campo-form btn-block",type:"email",name:"checkEmail",id:"checkEmail",placeholder:"Ingrese el email asociado con su cuenta",onChange:function(e){return C(e.target.value)}}),S?n.a.createElement("button",{className:"newPassword-submit-btn",color:"warning"},"Verificando..."):n.a.createElement("button",{className:"text-center btn btn-recuperar-password btn-block",color:"warning"},"Solicitar nueva contrase\xf1a")):null,n.a.createElement(l.b,{to:"/nueva-cuenta",className:"enlace-cuenta"},"Obtener Cuenta")))},h=function(e){var a=Object(r.useContext)(f),t=a.alerta,o=a.mostrarAlerta,c=Object(r.useContext)(E),s=c.mensaje,u=c.autenticado,i=c.registrarUsuario;Object(r.useEffect)((function(){u&&e.history.push("/proyectos"),s&&o(s.msg,s.categoria)}),[s,u,e.history]);var m=Object(r.useState)({nombre:"",referente:"",status:0,email:"",password:"",confirmar:""}),O=Object(b.a)(m,2),v=O[0],y=O[1],h=v.nombre,g=v.referente,j=v.email,R=v.password,A=v.confirmar,w=v.status,x=function(e){y(Object(d.a)(Object(d.a)({},v),{},Object(p.a)({},e.target.name,e.target.value)))};return n.a.createElement("div",{className:"form-usuario"},t?n.a.createElement("div",{className:"alerta ".concat(t.categoria)}," ",t.msg," "):null,n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("h1",null,"Crear una cuenta"),n.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),""!==h.trim()&&""!==g.trim()&&""!==j.trim()&&""!==R.trim()&&""!==A.trim()){R.match(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,15}$/)?R===A?i({nombre:h,referente:g,status:w,email:j,password:R}):o("Los passwords no son iguales","alerta-error"):o("El password debe ser de al menos 8 caracteres con una mayuscula letras y numeros","alerta-error")}else o("Todos los campos son obligatorios","alerta-error")}},n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"nombre"},"Nombre"),n.a.createElement("input",{type:"text",id:"nombre",name:"nombre",placeholder:"Tu Nombre",value:h,onChange:x})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"nombre"},"Referente"),n.a.createElement("input",{type:"text",id:"referente",name:"referente",placeholder:"Nombre Referente",value:g,onChange:x})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Tu Email",value:j,onChange:x})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Tu Password",value:R,onChange:x})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"confirmar"},"Confirmar Password"),n.a.createElement("input",{type:"password",id:"confirmar",name:"confirmar",placeholder:"Repite tu Password",value:A,onChange:x})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Realizar Registro"}))),n.a.createElement(l.b,{to:"/",className:"enlace-cuenta"},"Volver a Iniciar Sesi\xf3n")))},g=t(16),j=t(17),R=t(19),A=t(18),w=(t(71),function(e){Object(R.a)(t,e);var a=Object(A.a)(t);function t(){return Object(g.a)(this,t),a.apply(this,arguments)}return Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params.id,e.next=3,v.a.put("/validated_email/"+a,{status:1}).then((function(){return localStorage.setItem("STATUS",1)})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"validacion-container"},n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("h2",null,"Cuenta Validada Satisfactoriamente!"),n.a.createElement(l.b,{to:"/",className:"text-center btn btn-primario btn-block"},"Haga click aqui para ingresar")))}}]),t}(r.Component)),x=(t(72),function(e){Object(R.a)(t,e);var a=Object(A.a)(t);function t(e){var r;return Object(g.a)(this,t),(r=a.call(this)).onChange=function(e){r.setState(Object(p.a)({},e.target.name,e.target.value))},r.onSubmit=function(){var e=Object(m.a)(i.a.mark((function e(a){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),r.state.password&&r.state.confirmar){e.next=3;break}return e.abrupt("return",alert("Ingrese la informacion en los campos requeridos"));case 3:if(t=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,15}$/,r.state.password.match(t)){e.next=7;break}return alert("El password debe ser de al menos 8 caracteres y contener una letra mayuscula y un numero"),e.abrupt("return");case 7:if(r.state.password===r.state.confirmar){e.next=9;break}return e.abrupt("return",alert("Passwords no coinciden"));case 9:return n=r.props.match.params.id,e.next=12,v.a.put("/change_password/"+n,{password:r.state.password}).then((function(){alert("Actualizacion de cuenta exitosa! \n Ya puede ingresar")(window.location.href="/")})).catch((function(e){return console.log(e)}));case 12:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),r.state={password:"",confirmar:""},r}return Object(j.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"validacion-container"},n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("h2",null,"Ingrese nueva contrase\xf1a"),n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Tu Password",value:this.state.password,onChange:this.onChange})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"confirmar"},"Confirmar Password"),n.a.createElement("input",{type:"password",id:"confirmar",name:"confirmar",placeholder:"Repite tu Password",value:this.state.confirmar,onChange:this.onChange})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Realizar Registro"})))))}}]),t}(r.Component)),T=Object(r.createContext)(),N=function(){var e=Object(r.useContext)(T),a=e.formulario,t=e.errorformulario,o=e.mostrarFormulario,c=e.agregarProyecto,l=e.mostrarError,s=Object(r.useState)({nombre:""}),u=Object(b.a)(s,2),i=u[0],m=u[1],f=i.nombre;return n.a.createElement(r.Fragment,null,n.a.createElement("button",{type:"button",className:"btn btn-block btn-primario",onClick:function(){o()}},"Nuevo Proyecto"),a?n.a.createElement("form",{className:"formulario-nuevo-proyecto",onSubmit:function(e){e.preventDefault(),""!==f?(c(i),m({nombre:""})):l()}},n.a.createElement("input",{type:"text",className:"input-text",placeholder:"Nombre Proyecto",name:"nombre",value:f,onChange:function(e){m(Object(d.a)(Object(d.a)({},i),{},Object(p.a)({},e.target.name,e.target.value)))}}),n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Agregar Proyecto"})):null,t?n.a.createElement("p",{className:"mensaje error"},"El nombre del Proyecto es obligatorio"):null)},C=Object(r.createContext)(),k=function(e){var a=e.proyecto,t=Object(r.useContext)(T).proyectoActual,o=Object(r.useContext)(C).obtenerTareas;return n.a.createElement("li",null,n.a.createElement("button",{type:"button",className:"btn btn-blank",onClick:function(){return e=a._id,t(e),void o(e);var e}},a.nombre," "))},_=t(76),S=t(75),I=function(){var e=Object(r.useContext)(T),a=e.mensaje,t=e.proyectos,o=e.obtenerProyectos,c=Object(r.useContext)(f),l=c.alerta,s=c.mostrarAlerta;return Object(r.useEffect)((function(){a&&s(a.msg,a.categoria),o()}),[a]),0===t.length?n.a.createElement("p",null,"No hay proyectos, comienza creando uno"):n.a.createElement("ul",{className:"listado-proyectos"},l?n.a.createElement("div",{className:"alerta ".concat(l.categoria," ")},l.msg):null,n.a.createElement(_.a,null,t.map((function(e){return n.a.createElement(S.a,{key:e._id,timeout:200,classNames:"proyecto"},n.a.createElement(k,{proyecto:e}))}))))},P=function(){return n.a.createElement("aside",null,n.a.createElement("h1",null,"MERN",n.a.createElement("span",null,"Tasks")),n.a.createElement(N,null),n.a.createElement("div",{className:"proyectos"},n.a.createElement("h2",null,"Tus Proyectos"),n.a.createElement(I,null)))},L=function(){var e=Object(r.useContext)(E),a=e.usuario,t=e.usuarioAutenticado,o=e.cerrarSesion;return Object(r.useEffect)((function(){t()}),[]),n.a.createElement("header",{className:"app-header"},a?n.a.createElement("p",{className:"nombre-usuario"},"Hola ",n.a.createElement("span",null,a.nombre," ")," "):null,n.a.createElement("nav",{className:"nav-principal"},n.a.createElement("button",{className:"btn btn-blank cerrar-sesion",onClick:function(){return o()}},"Cerrar Sesi\xf3n")))},U=function(){var e=Object(r.useContext)(T).proyecto,a=Object(r.useContext)(C),t=a.tareaseleccionada,o=a.errortarea,c=a.agregarTarea,l=a.validarTarea,s=a.obtenerTareas,u=a.actualizarTarea,i=a.limpiarTarea;Object(r.useEffect)((function(){O(null!==t?t:{nombre:""})}),[t]);var m=Object(r.useState)({nombre:""}),f=Object(b.a)(m,2),E=f[0],O=f[1],v=E.nombre;if(!e)return null;var y=Object(b.a)(e,1)[0];return n.a.createElement("div",{className:"formulario"},n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==v.trim()?(null===t?(E.proyecto=y._id,c(E)):(u(E),i()),s(y.id),O({nombre:""})):l()}},n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"text",className:"input-text",placeholder:"Nombre Tarea...",name:"nombre",value:v,onChange:function(e){O(Object(d.a)(Object(d.a)({},E),{},Object(p.a)({},e.target.name,e.target.value)))}})),n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-submit btn-block",value:t?"Editar Tarea":"Agregar Tarea"}))),o?n.a.createElement("p",{className:"mensaje error"},"El nombre de la tarea es obligatorio"):null)},F=function(e){var a=e.tarea,t=Object(r.useContext)(T).proyecto,o=Object(r.useContext)(C),c=o.eliminarTarea,l=o.obtenerTareas,s=o.actualizarTarea,u=o.guardarTareaActual,i=Object(b.a)(t,1)[0],m=function(e){e.estado?e.estado=!1:e.estado=!0,s(e)};return n.a.createElement("li",{className:"tarea sombra"},n.a.createElement("p",null,a.nombre," "),n.a.createElement("div",{className:"estado"},a.estado?n.a.createElement("button",{type:"button",className:"completo",onClick:function(){return m(a)}},"Completo"):n.a.createElement("button",{type:"button",className:"incompleto",onClick:function(){return m(a)}},"Incompleto")),n.a.createElement("div",{className:"acciones"},n.a.createElement("button",{type:"button",className:"btn btn-primario",onClick:function(){return function(e){u(e)}(a)}},"Editar"),n.a.createElement("button",{type:"button",className:"btn btn-secundario",onClick:function(){return e=a._id,c(e,i._id),void l(i.id);var e}},"Eliminar")))},D=function(){var e=Object(r.useContext)(T),a=e.proyecto,t=e.eliminarProyecto,o=Object(r.useContext)(C).tareasproyecto;if(!a)return n.a.createElement("h2",null,"Selecciona un proyecto");var c=Object(b.a)(a,1)[0];return n.a.createElement(r.Fragment,null,n.a.createElement("h2",null,"Proyecto: ",c.nombre," "),n.a.createElement("ul",{className:"listado-tareas"},0===o.length?n.a.createElement("li",{className:"tarea"},n.a.createElement("p",null,"No hay tareas")):n.a.createElement(_.a,null,o.map((function(e){return n.a.createElement(S.a,{key:e.id,timeout:200,classNames:"tarea"},n.a.createElement(F,{tarea:e}))})))),n.a.createElement("button",{type:"button",className:"btn btn-eliminar",onClick:function(){t(c._id)}},"Eliminar Proyecto \xd7"))},G=function(){var e=Object(r.useContext)(E).usuarioAutenticado;return Object(r.useEffect)((function(){e()}),[]),n.a.createElement("div",{className:"contenedor-app"},n.a.createElement(P,null),n.a.createElement("div",{className:"seccion-principal"},n.a.createElement(L,null),n.a.createElement("main",null,n.a.createElement(U,null),n.a.createElement("div",{className:"contenedor-tareas"},n.a.createElement(D,null)))))},Y=t(24),M=function(e,a){switch(a.type){case"FORMULARIO_PROYECTO":return Object(d.a)(Object(d.a)({},e),{},{formulario:!0});case"OBTENER_PROYECTOS":return Object(d.a)(Object(d.a)({},e),{},{proyectos:a.payload});case"AGREGAR_PROYECTO":return Object(d.a)(Object(d.a)({},e),{},{proyectos:[].concat(Object(Y.a)(e.proyectos),[a.payload]),formulario:!1,errorformulario:!1});case"VALIDAR_FORMULARIO":return Object(d.a)(Object(d.a)({},e),{},{errorformulario:!0});case"PROYECTO_ACTUAL":return Object(d.a)(Object(d.a)({},e),{},{proyecto:e.proyectos.filter((function(e){return e._id===a.payload}))});case"ELIMINAR_PROYECTO":return Object(d.a)(Object(d.a)({},e),{},{proyectos:e.proyectos.filter((function(e){return e._id!==a.payload})),proyecto:null});case"PROYECTO_ERROR":return Object(d.a)(Object(d.a)({},e),{},{mensaje:a.payload});default:return e}},z=v.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_URL}),B=function(e){var a=Object(r.useReducer)(M,{proyectos:[],formulario:!1,errorformulario:!1,proyecto:null,mensaje:null}),t=Object(b.a)(a,2),o=t[0],c=t[1],l=function(){var e=Object(m.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get("/api/proyectos");case 3:a=e.sent,c({type:"OBTENER_PROYECTOS",payload:a.data.proyectos}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"PROYECTO_ERROR",payload:{msg:"Hubo un error",categoria:"alerta-error"}});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(m.a)(i.a.mark((function e(a){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.post("/api/proyectos",a);case 3:t=e.sent,console.log(t),c({type:"AGREGAR_PROYECTO",payload:t.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),c({type:"PROYECTO_ERROR",payload:{msg:"Hubo un error",categoria:"alerta-error"}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),u=function(){var e=Object(m.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.delete("/api/proyectos/".concat(a));case 3:c({type:"ELIMINAR_PROYECTO",payload:a}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),c({type:"PROYECTO_ERROR",payload:{msg:"Hubo un error",categoria:"alerta-error"}});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement(T.Provider,{value:{proyectos:o.proyectos,formulario:o.formulario,errorformulario:o.errorformulario,proyecto:o.proyecto,mensaje:o.mensaje,mostrarFormulario:function(){c({type:"FORMULARIO_PROYECTO"})},obtenerProyectos:l,agregarProyecto:s,mostrarError:function(){c({type:"VALIDAR_FORMULARIO"})},proyectoActual:function(e){c({type:"PROYECTO_ACTUAL",payload:e})},eliminarProyecto:u}},e.children)},V=function(e,a){switch(a.type){case"TAREAS_PROYECTO":return Object(d.a)(Object(d.a)({},e),{},{tareasproyecto:a.payload});case"AGREGAR_TAREA":return Object(d.a)(Object(d.a)({},e),{},{tareasproyecto:[a.payload].concat(Object(Y.a)(e.tareasproyecto)),errortarea:!1});case"VALIDAR_TAREA":return Object(d.a)(Object(d.a)({},e),{},{errortarea:!0});case"ELIMINAR_TAREA":return Object(d.a)(Object(d.a)({},e),{},{tareasproyecto:e.tareasproyecto.filter((function(e){return e._id!==a.payload}))});case"ACTUALIZAR_TAREA":return Object(d.a)(Object(d.a)({},e),{},{tareasproyecto:e.tareasproyecto.map((function(e){return e._id===a.payload._id?a.payload:e}))});case"TAREA_ACTUAL":return Object(d.a)(Object(d.a)({},e),{},{tareaseleccionada:a.payload});case"LIMPIAR_TAREA":return Object(d.a)(Object(d.a)({},e),{},{tareaseleccionada:null});default:return e}},W=function(e){var a=Object(r.useReducer)(V,{tareasproyecto:[],errortarea:!1,tareaseleccionada:null}),t=Object(b.a)(a,2),o=t[0],c=t[1],l=function(){var e=Object(m.a)(i.a.mark((function e(a){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.prev=1,e.next=4,z.get("/api/tareas",{params:{proyecto:a}});case 4:t=e.sent,console.log(t),c({type:"TAREAS_PROYECTO",payload:t.data.tareas}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}(),s=function(){var e=Object(m.a)(i.a.mark((function e(a){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.prev=1,e.next=4,z.post("/api/tareas",a);case 4:t=e.sent,console.log(t),c({type:"AGREGAR_TAREA",payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}(),u=function(){var e=Object(m.a)(i.a.mark((function e(a,t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.delete("/api/tareas/".concat(a),{params:{proyecto:t}});case 3:c({type:"ELIMINAR_TAREA",payload:a}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),p=function(){var e=Object(m.a)(i.a.mark((function e(a){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.put("/api/tareas/".concat(a._id),a);case 3:t=e.sent,c({type:"ACTUALIZAR_TAREA",payload:t.data.tarea}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement(C.Provider,{value:{tareasproyecto:o.tareasproyecto,errortarea:o.errortarea,tareaseleccionada:o.tareaseleccionada,obtenerTareas:l,agregarTarea:s,validarTarea:function(){c({type:"VALIDAR_TAREA"})},eliminarTarea:u,guardarTareaActual:function(e){c({type:"TAREA_ACTUAL",payload:e})},actualizarTarea:p,limpiarTarea:function(){c({type:"LIMPIAR_TAREA"})}}},e.children)},H=function(e,a){switch(a.type){case"MOSTRAR_ALERTA":return{alerta:a.payload};case"OCULTAR_ALERTA":return{alerta:null};default:return e}},J=function(e){var a=Object(r.useReducer)(H,{alerta:null}),t=Object(b.a)(a,2),o=t[0],c=t[1];return n.a.createElement(f.Provider,{value:{alerta:o.alerta,mostrarAlerta:function(e,a){c({type:"MOSTRAR_ALERTA",payload:{msg:e,categoria:a}}),setTimeout((function(){c({type:"OCULTAR_ALERTA"})}),5e3)}}},e.children)},K=function(){var e=Object(m.a)(i.a.mark((function e(a,t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="REGISTRO_EXITOSO"===e.t0?3:"LOGIN_EXITOSO"===e.t0?7:"OBTENER_USUARIO"===e.t0?9:"CERRAR_SESION"===e.t0||"LOGIN_ERROR"===e.t0||"REGISTRO_ERROR"===e.t0?10:12;break;case 3:return r={email:t.payloadEmail,nombre:t.payloadNombre,id:t.payloadId},e.next=6,v.a.post("/correo",r).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 6:return e.abrupt("return",Object(d.a)(Object(d.a)({},a),{},{mensaje:null}));case 7:return localStorage.setItem("token",t.payload.token),e.abrupt("return",Object(d.a)(Object(d.a)({},a),{},{autenticado:!0,mensaje:null,cargando:!1}));case 9:return e.abrupt("return",Object(d.a)(Object(d.a)({},a),{},{autenticado:!0,usuario:t.payload,cargando:!1}));case 10:return localStorage.removeItem("token"),e.abrupt("return",Object(d.a)(Object(d.a)({},a),{},{token:null,usuario:null,autenticado:null,mensaje:t.payload,cargando:!1}));case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),X=function(e){e?z.defaults.headers.common["x-auth-token"]=e:delete z.defaults.headers.common["x-auth-token"]},Z=function(e){var a={token:localStorage.getItem("token"),autenticado:null,usuario:null,mensaje:null,cargando:!0},t=Object(r.useReducer)(K,a),o=Object(b.a)(t,2),c=o[0],l=o[1],s=function(){var e=Object(m.a)(i.a.mark((function e(a){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.post("/api/usuarios",a);case 3:t=e.sent,l({type:"REGISTRO_EXITOSO",payload:t.data,payloadEmail:t.data.email,payloadNombre:t.data.nombre,payloadId:t.data.id}),alert("Por favor revise su correo"),window.location.href="/",e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,categoria:"alerta-error"},l({type:"REGISTRO_ERROR",payload:r});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}(),u=function(){var e=Object(m.a)(i.a.mark((function e(){var a,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=localStorage.getItem("token"))&&X(a),e.prev=2,e.next=5,z.get("/api/auth");case 5:t=e.sent,console.log(t),l({type:"OBTENER_USUARIO",payload:t.data.usuario}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0.response),l({type:"LOGIN_ERROR"});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(m.a)(i.a.mark((function e(a){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.post("/api/auth",a);case 3:t=e.sent,console.log(t),l({type:"LOGIN_EXITOSO",payload:t.data}),u(),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data.msg),r={msg:e.t0.response.data.msg,categoria:"alerta-error"},l({type:"LOGIN_ERROR",payload:r});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement(E.Provider,{value:{token:c.token,autenticado:c.autenticado,usuario:c.usuario,mensaje:c.mensaje,cargando:c.cargando,registrarUsuario:s,iniciarSesion:p,usuarioAutenticado:u,cerrarSesion:function(){l({type:"CERRAR_SESION"})}}},e.children)},$=t(39),q=function(e){var a=e.component,t=Object($.a)(e,["component"]),o=Object(r.useContext)(E),c=o.autenticado,l=o.cargando,u=o.usuarioAutenticado;return Object(r.useEffect)((function(){u()}),[]),n.a.createElement(s.b,Object.assign({},t,{render:function(e){return c||l?n.a.createElement(a,e):n.a.createElement(s.a,{to:"/"})}}))},Q=(t(73),function(e){Object(R.a)(t,e);var a=Object(A.a)(t);function t(e){var r;return Object(g.a)(this,t),(r=a.call(this)).cerrarSession=function(){localStorage.clear(),window.location.href="/"},r.state={isLoading:!0,error:!1,validatedUser:!1,nombre:""},r}return Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(i.a.mark((function e(){var a,t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.scrollTo(0,0),null===(a=localStorage.getItem("JWT"))&&this.setState({isLoading:!1,error:!0}),v.a.get("/profile",{headers:{Authorization:"JWT ".concat(a)}}).then((function(e){if(console.log(e),"error"===e.data.status)throw t.setState({error:!0,isLoading:!1}),new Error(e.data.message);1===e.data.status&&t.setState({validatedUser:!0}),t.setState({isLoading:!1,error:!1,nombre:e.data.nombre})})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.isLoading;return e.error?n.a.createElement("div",{style:{marginLeft:"10%",fontSize:"30px",height:"100vh",marginTop:"120px"}},"...Problema al tratar de ingresar, trate de login de nuevo",n.a.createElement("span",{role:"img","aria-label":"Face With Rolling Eyes Emoji"},"\ud83d\ude44"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("button",null,n.a.createElement(l.b,{className:"text-center",to:"/"},"Home"))):a?n.a.createElement("div",{style:{marginLeft:"10%",fontSize:"30px",height:"100vh",marginTop:"120px"}},"Cargando Informacion..."):this.state.validatedUser?n.a.createElement("div",{className:"perfil-container"},n.a.createElement("h2",{className:"perfil-title"},"Bienvenido ",this.state.nombre.toUpperCase())," ",n.a.createElement("hr",null),n.a.createElement("h4",{className:"text-center"},"Contenido por definir"),n.a.createElement("button",{onClick:this.cerrarSession},"Cerrar Session")):n.a.createElement("div",{className:"verificandoCuenta-container"},"Su cuenta no ha sido verificada. ",n.a.createElement("br",null)," Revise su correo para mas informacion.",n.a.createElement("br",null),n.a.createElement("br",null)," ",n.a.createElement(l.b,{className:"text-center",to:"/"},n.a.createElement("button",null,"\u2190 Volver a inicio")))}}]),t}(r.Component)),ee=localStorage.getItem("token");ee&&X(ee);var ae=function(){return n.a.createElement(B,null,n.a.createElement(W,null,n.a.createElement(J,null,n.a.createElement(Z,null,n.a.createElement(l.a,null,n.a.createElement(s.d,null,n.a.createElement(s.b,{exact:!0,path:"/",component:y}),n.a.createElement(s.b,{exact:!0,path:"/nueva-cuenta",component:h}),n.a.createElement(q,{exact:!0,path:"/proyectos",component:G}),n.a.createElement(s.b,{exact:!0,path:"/profile",component:Q}),n.a.createElement(s.b,{exact:!0,path:"/validated_email/:id",component:w}),n.a.createElement(s.b,{exact:!0,path:"/recupera_cuenta/:id",component:x})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.673aa3a7.chunk.js.map